<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculate Slopes of Roads, Rivers and Trajectories • slopes</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Calculate Slopes of Roads, Rivers and Trajectories">
<meta property="og:description" content="Functions and example data to support research into the
  slope (also known as longitudinal gradient or steepness)
  of linear geographic entities such as roads &lt;doi:10.1038/s41597-019-0147-x&gt;
  and rivers &lt;doi:10.1016/j.jhydrol.2018.06.066&gt;.
  The package was initially developed to calculate the steepness of street segments
  but can be used to calculate steepness of any linear feature that can be
  represented as LINESTRING geometries in the sf class system.
  The package takes two main types of input data for slope calculation: vector geographic
  objects representing linear features, and raster geographic objects with elevation values
  (which can be downloaded using functionality in the package)
  representing a continuous terrain surface.
  Where no raster object is provided the package attempts to download elevation
  data using the ceramic package.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">slopes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/slopes.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/benchmark.html">Benchmarking slopes calculation</a>
    </li>
    <li>
      <a href="articles/intro-to-slopes.html">An introduction to slopes</a>
    </li>
    <li>
      <a href="articles/roadnetworkcycling.html">Example: gradients of a road network for a given city</a>
    </li>
    <li>
      <a href="articles/verification.html">Verification of slopes</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/slopes/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="slopes-package" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#slopes-package" class="anchor"></a>slopes package</h1></div>
<!-- badges: start -->

<p>The <strong>slopes</strong> R package calculates the slope (longitudinal steepness, also known as gradient) of roads, rivers and other linear (simple) features, based on two main inputs:</p>
<ul>
<li>
<a href="https://geocompr.robinlovelace.net/spatial-class.html#vector-data">vector</a> linestring geometries defined by classes in the <a href="https://r-spatial.github.io/sf/"><code>sf</code></a> package</li>
<li>
<a href="https://geocompr.robinlovelace.net/spatial-class.html#raster-data">raster</a> objects with pixel values reporting average height, commonly known as digital elevation model (<strong>DEM</strong>) datasets, defined by classes in the <a href="https://cran.r-project.org/package=raster"><code>raster</code></a> or more recent <a href="https://rspatial.org/terra"><code>terra</code></a> packages</li>
</ul>
<p>Data on slopes are useful in many fields of research, including <a href="https://en.wikipedia.org/wiki/Stream_gradient">hydrology</a>, natural hazards (including <a href="https://www.humanitarianresponse.info/fr/operations/afghanistan/infographic/afg-river-gradient-and-flood-hazard">flooding</a> and <a href="https://assets.publishing.service.gov.uk/media/57a08d0740f0b652dd0016f4/R7815-ADD017_col.pdf">landslide risk management</a>), recreational and competitive sports such as <a href="http://theclimbingcyclist.com/gradients-and-cycling-an-introduction/">cycling</a>, <a href="https://trailism.com/trail-grades/">hiking</a>, and <a href="https://www.snowplaza.co.uk/blog/16682-skiing-steeps-what-does-gradient-mean-ski-piste/">skiing</a>. Slopes are also also important in some branches of <a href="https://www.sciencedirect.com/science/article/pii/S2352146516302642">transport and emissions modelling</a> and <a href="https://doi.org/10.1016/j.ncon.2016.10.001">ecology</a>. See the <a href="https://itsleeds.github.io/slopes/articles/intro-to-slopes.html"><code>intro-to-slopes</code> vignette</a> for details on fields using slope data and the need for this package.</p>
<p>This README covers installation and basic usage. For more information about slopes and how to use the package to calculate them, see the <a href="https://itsleeds.github.io/slopes/">get started</a> and the <a href="https://itsleeds.github.io/intro-to-slopes/">introducion to slopes</a> vignette.</p>
<div id="how-it-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-it-works" class="anchor"></a>How it works</h2>
<p>The package takes two main types of input data for slope calculation: - vector geographic objects representing <strong>linear features</strong>, and - <strong>elevation values</strong> from a digital elevation model representing a continuous terrain surface or which can be downloaded using functionality in the package</p>
<p>The package can be used with two sources of elevation data: - openly available elevation data via an interface to the <a href="https://github.com/hypertidy/ceramic">ceramic package</a>, enabling estimation of hilliness for routes anywhere worldwide even when local elevation data is lacking. The package takes geographic lines objects and returns elevation data per vertex (providing the output as a 3D point geometry in the sf package by default) and per line feature (providing average gradient by default). - an elevation model, available on your machine.</p>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<!-- You can install the released version of slopes from [CRAN](https://CRAN.R-project.org) with: -->
<!-- ``` r -->
<!-- install.packages("slopes") -->
<!-- ``` -->
<p>Install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"ropensci/slopes"</span><span class="op">)</span></code></pre></div>
<div id="installation-for-dem-downloads" class="section level4">
<h4 class="hasAnchor">
<a href="#installation-for-dem-downloads" class="anchor"></a>Installation for DEM downloads</h4>
<p>If you do not already have DEM data and want to make use of the package’s ability to download them using the <code>ceramic</code> package, install the package with suggested dependencies, as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"ropensci/slopes"</span>, dependencies <span class="op">=</span> <span class="st">"Suggests"</span><span class="op">)</span></code></pre></div>
<p>Furthermore, you will need to add a MapBox API key to be able to get DEM datasets, by signing up and registering for a key at <a href="https://account.mapbox.com/access-tokens/" class="uri">https://account.mapbox.com/access-tokens/</a> and then following these steps:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu">edit_r_environ</span><span class="op">(</span><span class="op">)</span>
<span class="va">MAPBOX_API_KEY</span><span class="op">=</span><span class="va">xxxxx</span> <span class="co"># replace XXX with your api key</span></code></pre></div>
</div>
</div>
</div>
<div id="basic-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-examples" class="anchor"></a>Basic examples</h2>
<p>Load the package in the usual way. We will also load the <code>sf</code> library:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/slopes">slopes</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span></code></pre></div>
<p>The minimum input data requirement for using the package is an <code>sf</code> object containing LINESTRING geometries, as illustrated below (requires a MapBox API key):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sf_linestring</span> <span class="op">=</span> <span class="va">lisbon_route</span> <span class="co"># import or load a linestring object</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sf_linestring_xyz</span> <span class="op">=</span> <span class="fu"><a href="reference/elevation_add.html">elevation_add</a></span><span class="op">(</span><span class="va">sf_linestring</span><span class="op">)</span>  <span class="co"># dem = NULL</span>
<span class="co">#&gt; Loading required namespace: ceramic</span>
<span class="co">#&gt; Preparing to download: 12 tiles at zoom = 12 from </span>
<span class="co">#&gt; https://api.mapbox.com/v4/mapbox.terrain-rgb/</span></code></pre></div>
<p>With the default argument <code>dem = NULL</code>, the function downloads the necessary elevation information from Mapbox. You can also this use a local digital elevation model (<code>dem = ...</code>), as shown in the example below:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sf_linestring_xyz_local</span> <span class="op">=</span> <span class="fu"><a href="reference/elevation_add.html">elevation_add</a></span><span class="op">(</span><span class="va">sf_linestring</span>, dem <span class="op">=</span> <span class="va">dem_lisbon_raster</span><span class="op">)</span></code></pre></div>
<p>In both cases you can obtain the average gradient of the linestring with <code><a href="reference/slope_xyz.html">slope_xyz()</a></code> and plot the elevation profile with <code><a href="reference/plot_slope.html">plot_slope()</a></code> as follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/slope_xyz.html">slope_xyz</a></span><span class="op">(</span><span class="va">sf_linestring_xyz_local</span><span class="op">)</span>
<span class="co">#&gt;          1 </span>
<span class="co">#&gt; 0.07817098</span>
<span class="fu"><a href="reference/plot_slope.html">plot_slope</a></span><span class="op">(</span><span class="va">sf_linestring_xyz_local</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-elevationprofile-1.png" width="100%"></p>
<p><em>See more functions in <a href="https://itsleeds.github.io/slopes/articles/slopes.html">Get started</a> vignette.</em></p>
</div>
<div id="see-more-in-vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#see-more-in-vignettes" class="anchor"></a>See more in vignettes</h2>
<ul>
<li><a href="https://itsleeds.github.io/slopes/articles/slopes.html">Get started</a></li>
<li><a href="https://itsleeds.github.io/slopes/articles/intro-to-slopes.html">An introduction to slopes</a></li>
<li><a href="https://itsleeds.github.io/slopes/articles/roadnetworkcycling.html">Reproducible example: gradients of a road network for a given city</a></li>
<li><a href="https://itsleeds.github.io/slopes/articles/verification.html">Verification of slopes</a></li>
<li><a href="https://itsleeds.github.io/slopes/articles/benchmark.html">Benchmarking slopes calculation</a></li>
</ul>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h2>
<p>Please note that the slopes project is released with a <a href="https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/ropensci/slopes/">https://​github.com/​ropensci/​slopes/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ropensci/slopes/issues">https://​github.com/​ropensci/​slopes/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Robin Lovelace <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5679-6536" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Rosa Félix <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-5642-6006" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Joey Talbot <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-6520-4560" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ropensci/slopes/actions"><img src="https://github.com/ropensci/slopes/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/ropensci/slopes?branch=master"><img src="https://codecov.io/gh/ropensci/slopes/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/ropensci/software-review/issues/420"><img src="https://badges.ropensci.org/420_status.svg" alt="Status at rOpenSci Software Peer Review"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Robin Lovelace, Rosa Félix, Joey Talbot.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
